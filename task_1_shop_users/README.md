# Анализ пользователей киберспортивного магазина ВКонтакте

Проект включает предобработку данных о пользователях онлайн-магазина для анализа целевой аудитории, увлекающейся киберспортом.

## Исходные данные
Датасет `shop_users.csv` содержит информацию о пользователях:
- Идентификатор пользователя (`id`)
- Дата рождения (`bdate`)
- Пол (`sex`: 0,1,2)
- Город проживания (сырые данные API)
- Страна проживания (сырые данные API)
- Количество подписчиков (`followers_count`)
- Время последнего входа (`last_seen`: UNIX-time в JSON-формате)
- Сумма трат (`costs`: JSON с amount/currency)
- Игровые предпочтения (`games`: JSON-список)
- Дополнительные поля (`common_count`, `home_town`, `relation`, `is_closed`)

## Основные этапы предобработки

### 1. Очистка данных
- Удаление дубликатов по `id` (сохранение первой записи)
- Удаление строк с пропусками в ключевых полях:
  - `last_seen`
  - `sex`
  - `costs`
  - `games`
- Преобразование `bdate` в возраст (целые года, расчет от текущей даты)

### 2. Стандартизация данных
- **Города**: 
  - Извлечение названия из JSON-строк (`'title': '...'`)
  - Унификация: санкт-петербург/Saint-Petersburg → Санкт-Петербург, москва/Moscow → Москва
- **Страны**: извлечение названия из JSON-строк
- **Пол**: преобразование кодов → категории:
  - 0 → не указан
  - 1 → Женский
  - 2 → Мужской

### 3. Преобразование форматов
- `last_seen`: 
  - Парсинг JSON и извлечение UNIX-time
  - Конвертация в формат `дд.мм.гггг`
- `followers_count`: приведение к целочисленному типу (`Int64`)
- `costs`: 
  - Конвертация валют в рубли по курсу на **07.07.2025**:
    - USD: 78.72
    - EUR: 92.41
    - KZT: 0.1515
    - RUR: 1.0
  - Округление до целого числа

### 4. Обработка игровых предпочтений
- Парсинг JSON-структуры
- Извлечение названий игр в плоский список

### 5. Удаление избыточных полей
Удалены нерелевантные для анализа столбцы:
- `common_count` (количество общих друзей)
- `home_town` (родной город, низкая заполняемость)
- `relation` (семейное положение)
- `is_closed` (признак закрытого профиля)
- `bdate` (исходная дата рождения, после расчета возраста)

## Результат
Подготовленный датасет содержит следующие поля:
1. `id` - идентификатор пользователя
2. `age` - возраст (рассчитанный)
3. `sex` - пол (категории)
4. `city` - очищенный город
5. `country` - очищенная страна
6. `followers_count` - количество подписчиков
7. `last_seen` - дата последнего входа (дд.мм.гггг)
8. `costs` - сумма трат в рублях
9. `games` - список названий игр

Данные готовы для:
- Построения аналитических дашбордов
- Сегментации пользователей
- Анализа игровых предпочтений
- Исследования покупательской способности

Для визуализации рекомендуется использовать:
- **Библиотеки**: Plotly, Seaborn
- **Инструменты**: Tableau, Power BI
